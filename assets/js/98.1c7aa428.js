(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{1025:function(s,a,t){"use strict";t.r(a);var r=t(594),e=(t(603),t(812),t(627),[]);!function s(a,t,r){for(var n=t||"0",l=r||e,p=[],v=0;v<3;v++){var c="".concat(n,"-").concat(v);l.push({title:c,key:c}),v<2&&p.push(c)}if(a<0)return l;var o=a-1;p.forEach((function(a,t){return l[t].children=[],s(o,a,l[t].children)}))}(1);var n={data:function(){return{gData:e,expandedKeys:["0-0","0-0-0","0-0-0-0"]}},methods:{onDragEnter:function(s){console.log(s)},onDrop:function(s){console.log(s);var a,t=s.node.eventKey,e=s.dragNode.eventKey,n=s.node.pos.split("-"),l=s.dropPosition-Number(n[n.length-1]),p=function s(a,t,r){a.forEach((function(a,e,n){return a.key===t?r(a,e,n):a.children?s(a.children,t,r):void 0}))},v=Object(r.a)(this.gData);if(p(v,e,(function(s,t,r){r.splice(t,1),a=s})),s.dropToGap)if((s.node.children||[]).length>0&&s.node.expanded&&1===l)p(v,t,(function(s){s.children=s.children||[],s.children.unshift(a)}));else{var c,o;p(v,t,(function(s,a,t){c=t,o=a})),-1===l?c.splice(o,0,a):c.splice(o+1,0,a)}else p(v,t,(function(s){s.children=s.children||[],s.children.push(a)}));this.gData=v}}},l=t(92),p=Object(l.a)(n,(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("div",[[t("demo-box-code",{attrs:{title:"拖动示例",usTitle:"draggable"}},[t("template",{slot:"demo"},[t("a-tree",{staticClass:"draggable-tree",attrs:{defaultExpandedKeys:s.expandedKeys,draggable:"",treeData:s.gData},on:{dragenter:s.onDragEnter,drop:s.onDrop}})],1),s._v(" "),t("template",{slot:"description"},[t("p",[s._v("将节点拖拽到其他节点内部或前后。")])]),s._v(" "),t("template",{slot:"code"},[t("pre",{pre:!0},[t("code",{pre:!0,attrs:{"v-pre":"",class:"language-html"}},[t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("a-tree")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("class")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"draggable-tree"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":defaultExpandedKeys")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"expandedKeys"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("draggable")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@dragenter")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"onDragEnter"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("@drop")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"onDrop"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v(":treeData")]),s._v("="),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"gData"')]),s._v("\n  />")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("template")]),s._v(">")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),t("span",{pre:!0,attrs:{class:"javascript"}},[s._v("\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" x = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v(";\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" y = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v(";\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" z = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" gData = [];\n\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" generateData = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("_level, _preKey, _tns")]),s._v(") =>")]),s._v(" {\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" preKey = _preKey || "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'0'")]),s._v(";\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" tns = _tns || gData;\n\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" children = [];\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v(" ("),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" i = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; i < x; i++) {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" key = "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("`"),t("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${preKey}")]),s._v("-"),t("span",{pre:!0,attrs:{class:"hljs-subst"}},[s._v("${i}")]),s._v("`")]),s._v(";\n      tns.push({ "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("title")]),s._v(": key, key });\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (i < y) {\n        children.push(key);\n      }\n    }\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (_level < "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(") {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" tns;\n    }\n    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" level = _level - "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(";\n    children.forEach("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("key, index")]),s._v(") =>")]),s._v(" {\n      tns[index].children = [];\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" generateData(level, key, tns[index].children);\n    });\n  };\n  generateData(z);\n  "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("default")]),s._v(" {\n    data() {\n      "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" {\n        gData,\n        "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("expandedKeys")]),s._v(": ["),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'0-0'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'0-0-0'")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'0-0-0-0'")]),s._v("],\n      };\n    },\n    "),t("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("methods")]),s._v(": {\n      onDragEnter(info) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(info);\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// expandedKeys 需要受控时设置")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// this.expandedKeys = info.expandedKeys")]),s._v("\n      },\n      onDrop(info) {\n        "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log(info);\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" dropKey = info.node.eventKey;\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" dragKey = info.dragNode.eventKey;\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" dropPos = info.node.pos.split("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'-'")]),s._v(");\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" dropPosition = info.dropPosition - "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("Number")]),s._v("(dropPos[dropPos.length - "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("]);\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" loop = "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("data, key, callback")]),s._v(") =>")]),s._v(" {\n          data.forEach("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("item, index, arr")]),s._v(") =>")]),s._v(" {\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (item.key === key) {\n              "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" callback(item, index, arr);\n            }\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (item.children) {\n              "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" loop(item.children, key, callback);\n            }\n          });\n        };\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("const")]),s._v(" data = [...this.gData];\n\n        "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// Find dragObject")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" dragObj;\n        loop(data, dragKey, (item, index, arr) => {\n          arr.splice(index, "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(");\n          dragObj = item;\n        });\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (!info.dropToGap) {\n          "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// Drop on the content")]),s._v("\n          loop(data, dropKey, item => {\n            item.children = item.children || [];\n            "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// where to insert 示例添加到尾部，可以是随意位置")]),s._v("\n            item.children.push(dragObj);\n          });\n        } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (\n          (info.node.children || []).length > "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(" && "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// Has children")]),s._v("\n          info.node.expanded && "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// Is expanded")]),s._v("\n          dropPosition === "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// On the bottom gap")]),s._v("\n        ) {\n          loop(data, dropKey, item => {\n            item.children = item.children || [];\n            "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// where to insert 示例添加到尾部，可以是随意位置")]),s._v("\n            item.children.unshift(dragObj);\n          });\n        } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" ar;\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("let")]),s._v(" i;\n          loop(data, dropKey, (item, index, arr) => {\n            ar = arr;\n            i = index;\n          });\n          "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v(" (dropPosition === "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("-1")]),s._v(") {\n            ar.splice(i, "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", dragObj);\n          } "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v(" {\n            ar.splice(i + "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(", "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v(", dragObj);\n          }\n        }\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("this")]),s._v(".gData = data;\n      },\n    },\n  };\n")]),t("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),t("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),s._v("\n")])])])],2)]],2)}),[],!1,null,null,null);a.default=p.exports},812:function(s,a,t){"use strict";var r=t(566),e=t(575),n=t(588),l=t(729),p=t(580),v=t(569),c=t(637).f,o=t(688).f,_=t(574).f,i=t(813).trim,d=r.Number,h=d,j=d.prototype,u="Number"==n(t(612)(j)),f="trim"in String.prototype,g=function(s){var a=p(s,!1);if("string"==typeof a&&a.length>2){var t,r,e,n=(a=f?a.trim():i(a,3)).charCodeAt(0);if(43===n||45===n){if(88===(t=a.charCodeAt(2))||120===t)return NaN}else if(48===n){switch(a.charCodeAt(1)){case 66:case 98:r=2,e=49;break;case 79:case 111:r=8,e=55;break;default:return+a}for(var l,v=a.slice(2),c=0,o=v.length;c<o;c++)if((l=v.charCodeAt(c))<48||l>e)return NaN;return parseInt(v,r)}}return+a};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(s){var a=arguments.length<1?0:s,t=this;return t instanceof d&&(u?v((function(){j.valueOf.call(t)})):"Number"!=n(t))?l(new h(g(a)),t,d):g(a)};for(var y,m=t(567)?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;m.length>k;k++)e(h,y=m[k])&&!e(d,y)&&_(d,y,o(h,y));d.prototype=j,j.constructor=d,t(577)(r,"Number",d)}},813:function(s,a,t){var r=t(586),e=t(582),n=t(569),l=t(814),p="["+l+"]",v=RegExp("^"+p+p+"*"),c=RegExp(p+p+"*$"),o=function(s,a,t){var e={},p=n((function(){return!!l[s]()||"​"!="​"[s]()})),v=e[s]=p?a(_):l[s];t&&(e[t]=v),r(r.P+r.F*p,"String",e)},_=o.trim=function(s,a){return s=String(e(s)),1&a&&(s=s.replace(v,"")),2&a&&(s=s.replace(c,"")),s};s.exports=o},814:function(s,a){s.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);