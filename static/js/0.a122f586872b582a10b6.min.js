webpackJsonp([0],{356:function(e,t,o){var i=o(357);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o(132)("7a610652",i,!0,{})},357:function(e,t,o){t=e.exports=o(131)(!1),t.push([e.i,"#videoRecorder,#videoRecorder2{width:80%;height:60%;margin:auto}",""])},358:function(e,t,o){var i=o(359);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o(132)("0aaaa6e4",i,!0,{})},359:function(e,t,o){t=e.exports=o(131)(!1),t.push([e.i,".video-information[data-v-270600e7]{width:6.9rem;margin:auto}.video-information .one[data-v-270600e7]{font-size:.24rem;color:#666;margin-top:.1rem}.video-information .two[data-v-270600e7]{font-size:.3rem;color:#333;margin-top:.2rem}#testContainer[data-v-270600e7]{width:100%;height:100%}.enter-container[data-v-270600e7]{width:6.7rem;margin:auto}.enter-container .btn[data-v-270600e7]{width:100%;height:.88rem;border:none;border-radius:.06rem;background-color:#1874e6;color:#fff;font-size:.34rem;font-weight:700;margin-top:.15rem}.enter-container .btn2[data-v-270600e7]{background-color:#3582e2}.tips[data-v-270600e7]{color:#666;font-size:.24rem;margin:.15rem .3rem}.tips a[data-v-270600e7]{color:#1874e6}",""])},360:function(e,t,o){"use strict";function i(e,t){d.a.prototype.$dialog.toast({mes:e,icon:t,timeout:1500})}function r(e){e?d.a.prototype.$dialog.loading.open(e):d.a.prototype.$dialog.loading.open()}function n(){d.a.prototype.$dialog.loading.close()}Object.defineProperty(t,"__esModule",{value:!0});var a=o(67),d=o.n(a);t.default={created:function(){this.orderId=this.$route.query.id||"1"},data:function(){return{recordRTC:"",orderId:"",showVideo:!1,beginRecord:!1,videoFile:!1,fileName:"",testUrl:""}},methods:{successCallback:function(e){console.log("success");var t=document.createElement("video");t.id="videoRecorder",t.poster="",t.srcObject=e,t.play(),document.getElementById("recorderContainer").appendChild(t);var o={video:{width:320,height:480},type:"video",videoBitsPerSecond:153600,mimeType:"video/webm;codecs=h264",timeSlice:1e3};this.recordRTC=new RecordRTC.MediaStreamRecorder(e,o),console.log(this.recordRTC);var i=document.getElementById("videoRecorder");i.volume=0,i.volumevalue=0},errorCallback:function(e){console.log("error"),console.log(e)},start:function(){if(this.beginRecord)return!1;this.beginRecord=!0;var e=document.getElementById("videoRecorder");e&&(e.style.display="block"),document.getElementById("submitVideo").style.display="none",this.videoFile=!1,this.showVideo=!1,this.recordRTC.record(),i("开始录制","success")},stop:function(){r("视频生成中");var e=this;this.recordRTC.stop(function(t){var o=t;if(console.log(t),n(),o.size<1e3)return i("视频录制失败","error"),!1;var r=parseInt(1e6*Math.random());return e.fileName="test"+r+".webm",e.videoFile=new File([o],e.fileName,{type:"video/webm"}),e.testUrl=URL.createObjectURL(e.videoFile),console.log(e.testUrl),i("视频生成成功","success"),document.getElementById("recordBtn").innerHTML="重新拍摄",void(e.beginRecord=!1)})},submitVideo:function(){var e=new FormData;e.append("file",this.videoFile),e.append("order_id",this.orderId),e.append("transform",1);this.showVideo=!0},toOld:function(){},preview:function(){window.location.href="/order/test"}},mounted:function(){var e={audio:!0,video:!0};navigator.mediaDevices.getUserMedia(e).then(this.successCallback).catch(this.errorCallback)}}},361:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"testContainer"}},[o("div",{attrs:{id:"recorderContainer"}}),e._v(" "),o("video",{style:{display:e.testUrl?"block":"none"},attrs:{src:e.videoFile,id:"videoRecorder2",controls:"controls","webkit-playsinline":"true",preload:"auto"}}),e._v(" "),e.showVideo?e._e():o("div",{staticClass:"video-information"},[o("div",{staticClass:"one"},[e._v("请在视频中念出")]),e._v(" "),o("div",{staticClass:"two"},[e._v("我是XXX,身份证号XXXXXXXX；现委托阎虹辰，身份证号513822198506224820代为办理常熟个体工商户注册的一切事宜。本人承诺此委托书为本人真实意思表示，愿为此次委托代办事宜承担一切法律后果，特此证明！")])]),e._v(" "),o("div",{staticClass:"enter-container"},[o("button",{staticClass:"btn btn2",style:{display:e.beginRecord?"none":"block"},attrs:{id:"recordBtn"},on:{click:e.start}},[e._v("开始")]),e._v(" "),e.beginRecord?o("button",{staticClass:"btn btn2",on:{click:e.stop}},[e._v("停止录制")]):e._e(),e._v(" "),o("button",{staticClass:"btn",staticStyle:{display:"none"},attrs:{id:"submitVideo"},on:{click:e.submitVideo}},[e._v("提交")]),e._v(" "),o("a",{attrs:{href:e.testUrl,download:e.fileName,id:"download"}},[o("button",{staticClass:"btn"},[e._v("下载")])])]),e._v(" "),o("div",{staticClass:"tips"},[e._v("如出现摄像黑屏或无界面出现，或录制效果不佳，请前往旧版录制页面！"),o("a",{on:{click:e.toOld}},[e._v("点击前往")])])])},staticRenderFns:[]}},366:function(e,t,o){function i(e){o(356),o(358)}var r=o(133)(o(360),o(361),i,"data-v-270600e7",null);e.exports=r.exports}});